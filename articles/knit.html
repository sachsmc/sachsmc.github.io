<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to <code>knitr</code> • sachsmc</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to &lt;code&gt;knitr&lt;/code&gt;">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sachsmc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1983.9.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Publications</a>
</li>
<li>
  <a href="../articles/software.html">Software</a>
</li>
<li>
  <a href="../articles/talks.html">Talks</a>
</li>
<li>
  <a href="../articles/index.html">Blog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/git.html">git and github</a>
    </li>
    <li>
      <a href="../articles/knit.html">Introduction to `knitr`</a>
    </li>
    <li>
      <a href="../articles/research.html">Organizing your approach to a research study</a>
    </li>
    <li>
      <a href="../articles/software.html">Open Source Software</a>
    </li>
    <li>
      <a href="../articles/talks.html">Recent Presentations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to <code>knitr</code>
</h1>
                        <h4 class="author">Michael Sachs</h4>
            
            <h4 class="date">2015-07-23T21:13:14-05:00</h4>
      
      
      <div class="hidden name"><code>knit.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>Programs are meant to be read by humans and only incidentally for computers to execute.</p>
</blockquote>
<blockquote>
<ul>
<li>Donald Knuth</li>
</ul>
</blockquote>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>The cut-and-paste approach to report production is tedious, slow, and error-prone. It can be very harmful to reproducible research and it is inconvenient to reproduce results.</p>
<p><code>knitr</code> is an <code>R</code> package that integrates computing and reporting. By incorporating code into text documents, the analysis, results and discussion are all in one place. Files can then be processed into a diverse array of document formats, including the important ones for collaborative science: pdfs, Word documents, slide presentations, and web pages.</p>
<p>This is important for reproducible research because you can create reports, papers, presentations in which every table, figure, and inline result is generated by code that is tied to the document itself. It makes life easier when it comes time to make small updates to an analysis, and more importantly, the code becomes more understandable by virtue of being directly related to the text description.</p>
<div id="the-importance-of-text" class="section level3">
<h3 class="hasAnchor">
<a href="#the-importance-of-text" class="anchor"></a>The importance of text</h3>
<p>There are many advantages to creating scientific content using simple text documents. For one, they are future-proof. Microsoft and Apple are continually updating their software and document formats. In 5 years I probably won’t be able to easily open a Word document that I created today, and likewise, when a new document format comes out (remember when .docx was new?) it takes a while for it to be widely adopted. It is highly unlikely that text documents will become obsolete. I can still open a text file that I created on my old Apple IIe. Secondly, content tracking tools like <code>git</code> and github work wonderfully with text files. It is dead-easy to view line-by-line changes in a text file.</p>
<p>Tools like <code>knitr</code>, <code>rmarkdown</code>, and pandoc do the hard work of translating your text files into “production” documents, like beautifully typeset pdfs, smooth presentations, and Word documents that your collaborators can’t live without. Creating the base in a text file allows you to focus on the content and not obsess over the details like formatting and figure placement. This document was created with <code>knitr</code> in markdown. Check out the source code <a href="http://github.com/sachsmc/knit-git-markr-guide/blob/master/knitr/knit.Rmd">here</a>.</p>
</div>
</div>
<div id="how-to-use-knitr" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-knitr" class="anchor"></a>How to use <code>knitr</code>
</h2>
<p>The basic idea is that your text documents are interrupted by <strong>chunks</strong> of code that are identified in a special way. These chunks are evaluated by an <code>R</code> process in the order that they appear. <code>R</code> objects that are created by chunks remain in the enviroment for subsequent chunks. The code in the chunks is displayed and formatted in the document. The results printed by the code are also incorporated into the document as figures, tables, or other objects. Chunks can stand alone, or be included inline with text. Many options exist to format the code and the results, and the options can be extended in countless ways.</p>
<p>How exactly to use <code>knitr</code> depends on the input document format. First I will desribe how to use it with <a href="http://daringfireball.net/projects/markdown/"><strong>markdown</strong></a>.</p>
<div id="knitr-with-markdown" class="section level3">
<h3 class="hasAnchor">
<a href="#knitr-with-markdown" class="anchor"></a><code>knitr</code> with markdown</h3>
<p>When I say markdown I am referring to the plain text formatting syntax, as opposed to the software. Markdown is a syntax closely related to html. It is semantic, like html, but it is much less verbose. Markdown documents can in fact stand on their own as readable text documents without being rendered. Semantic means that elements of the document are described by what they represent, as opposed to how they should look. Thus, for a title, you indicate that this text is the title, as opposed to this text should be large font and in bold. Here is an example with the result:</p>
<div class="figure">
<img src="../../../../../../../knit/mark1.png" alt="mark1"><p class="caption">mark1</p>
</div>
<p>Importantly, the markdown can stand on its own and continue to be readable even though it’s a simple text file. Contrast that with the generated html:</p>
<div class="figure">
<img src="../../../../../../../knit/html.png" alt="html1"><p class="caption">html1</p>
</div>
<p>Or the equivalent Latex:</p>
<div class="figure">
<img src="../../../../../../../knit/tex.png" alt="tex"><p class="caption">tex</p>
</div>
<p>Thus markdown has the dual advantages of being readble on it’s own, and having associated tools to create other document formats from it. Math in markdown is just like math in Latex.</p>
</div>
<div id="incorporating-code-chunks" class="section level3">
<h3 class="hasAnchor">
<a href="#incorporating-code-chunks" class="anchor"></a>Incorporating code chunks</h3>
<p>In markdown, the start of a code chunk is indicated by three backticks and the end of a code chunk is indicated by three backticks. At the start of the chunk, you tell <code>knitr</code> what type of code it is, give the chunk a name, and other options:</p>
<pre><code>```{r my-first-chunk, results='asis'}
## code goes in here
```</code></pre>
<p>Inline code is similar, using single backticks instead. Inline code does not have names or options. For example, <code>r rnorm(10)</code>.</p>
<p>Here’s an example of raw output using the <code>mtcars</code> dataset:</p>
<pre><code>```{r mtcars-example}
lm(mpg ~ hp + wt, data = mtcars)
```</code></pre>
<pre><code>## 
## Call:
## lm(formula = mpg ~ hp + wt, data = mtcars)
## 
## Coefficients:
## (Intercept)           hp           wt  
##    37.22727     -0.03177     -3.87783</code></pre>
<p>And here’s a plot</p>
<pre><code>```{r mt-plot}
library(ggplot2)
ggplot(mtcars, aes(y = mpg, x = wt, size = hp)) + geom_point() + stat_smooth(method = "lm", se = FALSE)
```</code></pre>
<p><img src="knit_files/figure-html/mt-plot-1.png" width="700"></p>
<p>The concept is very simple. Anything you want to do in <code>R</code> is incorporated into your document, the results alongside the code. The important details to learn are methods of controlling the output. This means making nice looking tables, decent figures, and formatting inline results. We will cover these topics next.</p>
</div>
</div>
<div id="controlling-r-output" class="section level1">
<h1 class="hasAnchor">
<a href="#controlling-r-output" class="anchor"></a>Controlling <code>R</code> output</h1>
<div id="tables" class="section level3">
<h3 class="hasAnchor">
<a href="#tables" class="anchor"></a>Tables</h3>
<p>When outputting tables in knitr, it is important to use the option <code>results = 'asis'</code>. There are several options for formatting tables in <code>R</code>. The <code>knitr</code> package includes a function called <code>kable</code> that makes basic <strong>k</strong>nitr t<strong>ables</strong>. There are options to control the number of digits, whether row names are included or not, column alignment, and other options that depend on the output type.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">kable</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(mtcars), <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">align =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"l"</span>, <span class="dv">4</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"c"</span>, <span class="dv">4</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"r"</span>, <span class="dv">4</span>)))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="left">mpg</th>
<th align="left">cyl</th>
<th align="left">disp</th>
<th align="left">hp</th>
<th align="center">drat</th>
<th align="center">wt</th>
<th align="center">qsec</th>
<th align="center">vs</th>
<th align="right">am</th>
<th align="right">gear</th>
<th align="right">carb</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Mazda RX4</td>
<td align="left">21.0</td>
<td align="left">6</td>
<td align="left">160</td>
<td align="left">110</td>
<td align="center">3.90</td>
<td align="center">2.62</td>
<td align="center">16.46</td>
<td align="center">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td>Mazda RX4 Wag</td>
<td align="left">21.0</td>
<td align="left">6</td>
<td align="left">160</td>
<td align="left">110</td>
<td align="center">3.90</td>
<td align="center">2.88</td>
<td align="center">17.02</td>
<td align="center">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td>Datsun 710</td>
<td align="left">22.8</td>
<td align="left">4</td>
<td align="left">108</td>
<td align="left">93</td>
<td align="center">3.85</td>
<td align="center">2.32</td>
<td align="center">18.61</td>
<td align="center">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td>Hornet 4 Drive</td>
<td align="left">21.4</td>
<td align="left">6</td>
<td align="left">258</td>
<td align="left">110</td>
<td align="center">3.08</td>
<td align="center">3.21</td>
<td align="center">19.44</td>
<td align="center">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td>Hornet Sportabout</td>
<td align="left">18.7</td>
<td align="left">8</td>
<td align="left">360</td>
<td align="left">175</td>
<td align="center">3.15</td>
<td align="center">3.44</td>
<td align="center">17.02</td>
<td align="center">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td>Valiant</td>
<td align="left">18.1</td>
<td align="left">6</td>
<td align="left">225</td>
<td align="left">105</td>
<td align="center">2.76</td>
<td align="center">3.46</td>
<td align="center">20.22</td>
<td align="center">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>For finer control, use the <code>xtable</code> package. There are tons of options (see the help file), and the interface is a bit clunky. For instance some options are passed to <code>xtable</code>, while others are passed to <code>print.xtable</code>. The key one for markdown is to use <code><a href="https://www.rdocumentation.org/packages/base/topics/print">print(xtable(x), type = "html")</a></code>.</p>
<pre><code>```{r xtable, results = 'asis'}
library(xtable)
print(xtable(head(mtcars)), type = "html")
```</code></pre>
<!-- html table generated in R 3.6.1 by xtable 1.8-4 package -->
<!-- Mon Sep 02 11:39:31 2019 -->
<table class="table">
<tr>
<th>
</th>
<th>
mpg
</th>
<th>
cyl
</th>
<th>
disp
</th>
<th>
hp
</th>
<th>
drat
</th>
<th>
wt
</th>
<th>
qsec
</th>
<th>
vs
</th>
<th>
am
</th>
<th>
gear
</th>
<th>
carb
</th>
</tr>
<tr>
<td align="right">
Mazda RX4
</td>
<td align="right">
21.00
</td>
<td align="right">
6.00
</td>
<td align="right">
160.00
</td>
<td align="right">
110.00
</td>
<td align="right">
3.90
</td>
<td align="right">
2.62
</td>
<td align="right">
16.46
</td>
<td align="right">
0.00
</td>
<td align="right">
1.00
</td>
<td align="right">
4.00
</td>
<td align="right">
4.00
</td>
</tr>
<tr>
<td align="right">
Mazda RX4 Wag
</td>
<td align="right">
21.00
</td>
<td align="right">
6.00
</td>
<td align="right">
160.00
</td>
<td align="right">
110.00
</td>
<td align="right">
3.90
</td>
<td align="right">
2.88
</td>
<td align="right">
17.02
</td>
<td align="right">
0.00
</td>
<td align="right">
1.00
</td>
<td align="right">
4.00
</td>
<td align="right">
4.00
</td>
</tr>
<tr>
<td align="right">
Datsun 710
</td>
<td align="right">
22.80
</td>
<td align="right">
4.00
</td>
<td align="right">
108.00
</td>
<td align="right">
93.00
</td>
<td align="right">
3.85
</td>
<td align="right">
2.32
</td>
<td align="right">
18.61
</td>
<td align="right">
1.00
</td>
<td align="right">
1.00
</td>
<td align="right">
4.00
</td>
<td align="right">
1.00
</td>
</tr>
<tr>
<td align="right">
Hornet 4 Drive
</td>
<td align="right">
21.40
</td>
<td align="right">
6.00
</td>
<td align="right">
258.00
</td>
<td align="right">
110.00
</td>
<td align="right">
3.08
</td>
<td align="right">
3.21
</td>
<td align="right">
19.44
</td>
<td align="right">
1.00
</td>
<td align="right">
0.00
</td>
<td align="right">
3.00
</td>
<td align="right">
1.00
</td>
</tr>
<tr>
<td align="right">
Hornet Sportabout
</td>
<td align="right">
18.70
</td>
<td align="right">
8.00
</td>
<td align="right">
360.00
</td>
<td align="right">
175.00
</td>
<td align="right">
3.15
</td>
<td align="right">
3.44
</td>
<td align="right">
17.02
</td>
<td align="right">
0.00
</td>
<td align="right">
0.00
</td>
<td align="right">
3.00
</td>
<td align="right">
2.00
</td>
</tr>
<tr>
<td align="right">
Valiant
</td>
<td align="right">
18.10
</td>
<td align="right">
6.00
</td>
<td align="right">
225.00
</td>
<td align="right">
105.00
</td>
<td align="right">
2.76
</td>
<td align="right">
3.46
</td>
<td align="right">
20.22
</td>
<td align="right">
1.00
</td>
<td align="right">
0.00
</td>
<td align="right">
3.00
</td>
<td align="right">
1.00
</td>
</tr>
</table>
<p>The <code>stargazer</code> package creates good-looking tables with minimal effort. It is especially useful for summarizing a series of regression models. See the help files for all the available options.</p>
<pre><code>```{r star, results = 'asis', warning=FALSE, message=FALSE}
library(stargazer, quietly = TRUE)

fit1 &lt;- lm(mpg ~ wt, mtcars)
fit2 &lt;- lm(mpg ~ wt + hp, mtcars)
fit3 &lt;- lm(mpg ~ wt + hp + disp, mtcars)

stargazer(fit1, fit2, fit3, type = 'html')
```</code></pre>
<table class="table">
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="3">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="3">
mpg
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
wt
</td>
<td>
-5.344<sup>***</sup>
</td>
<td>
-3.878<sup>***</sup>
</td>
<td>
-3.801<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.559)
</td>
<td>
(0.633)
</td>
<td>
(1.066)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
hp
</td>
<td>
</td>
<td>
-0.032<sup>***</sup>
</td>
<td>
-0.031<sup>**</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(0.009)
</td>
<td>
(0.011)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
disp
</td>
<td>
</td>
<td>
</td>
<td>
-0.001
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
(0.010)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
37.285<sup>***</sup>
</td>
<td>
37.227<sup>***</sup>
</td>
<td>
37.106<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.878)
</td>
<td>
(1.599)
</td>
<td>
(2.111)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
32
</td>
<td>
32
</td>
<td>
32
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.753
</td>
<td>
0.827
</td>
<td>
0.827
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.745
</td>
<td>
0.815
</td>
<td>
0.808
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
3.046 (df = 30)
</td>
<td>
2.593 (df = 29)
</td>
<td>
2.639 (df = 28)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
91.375<sup>***</sup> (df = 1; 30)
</td>
<td>
69.211<sup>***</sup> (df = 2; 29)
</td>
<td>
44.566<sup>***</sup> (df = 3; 28)
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="3" style="text-align:right">
<sup><em></em></sup>p&lt;0.1; <sup><strong></strong></sup>p&lt;0.05; <sup></sup>p&lt;0.01
</td>
</tr>
</table>
<p>For long-running computations, a useful chunk option is <code>cache = TRUE</code>. This creates a folder called cache in your working directory that will store the results of the computation after the first time you run it. After that, re-knitting the document is fast.</p>
</div>
<div id="figures" class="section level3">
<h3 class="hasAnchor">
<a href="#figures" class="anchor"></a>Figures</h3>
<p>In general, figures will appear in a knit document exactly as they would appear in the <code>R</code> session. There are several important figure options to be aware of.</p>
<ul>
<li>
<code>dev</code>, controls the graphics device used to create the figures. For example pdf, png, or jpeg. Check out <code>tikzDevice</code> if you are creating pdf output. The <code>tikzDevice</code> generates Latex code from <code>R</code> plots for use in Latex documents. That way, all fonts match the main text, and the Tex syntax for mathematics can be used directly in plots. Here are two examples of the power of <code>tikzDevice</code>: <a href="http://bit.ly/114GNdP" class="uri">http://bit.ly/114GNdP</a>, <a href="http://cran.r-project.org/web/packages/tikzDevice/vignettes/tikzDevice.pdf">example</a>
</li>
<li>
<code>path</code> what directory to save the figures.</li>
<li>
<code>fig_width</code>, <code>fig_height</code>, in inches. Can also be set globally.</li>
<li>
<code>fig_align</code>, left, right or center.</li>
</ul>
</div>
<div id="inline-results" class="section level3">
<h3 class="hasAnchor">
<a href="#inline-results" class="anchor"></a>Inline results</h3>
<p>In my papers and reports, I strive to generate every in-text number from code. Anytime I reference a sample size, report summary statistics, or p-values in the text, <code>paste</code> and <code>sprintf</code> are my friends. Reporting in this way means no more missed corrections when you have to rerun an analysis, no more rounding errors, and the comfort that you didn’t mis-type a digit. Here are a couple examples using <code>paste</code> and <code>sprintf</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">paste_meansd &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>){</a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x, <span class="dt">na.rm =</span> na.rm), digits), <span class="st">" ("</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x, <span class="dt">na.rm =</span> na.rm), digits), <span class="st">")"</span>)  </a>
<a class="sourceLine" id="cb8-3" title="3">}</a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">## The mean (sd) of a random sample of normals is `r paste_meansd(rnorm(100))`</span></a></code></pre></div>
<p>The mean (sd) of a random sample of normals is -0.12 (1.06)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">sprint_CI95 &lt;-<span class="st"> </span><span class="cf">function</span>(mu, se, <span class="dt">trans =</span> <span class="cf">function</span>(x) x) {</a>
<a class="sourceLine" id="cb9-2" title="2">  lim &lt;-<span class="st"> </span><span class="kw">trans</span>(mu <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="op">-</span><span class="fl">1.96</span>, <span class="fl">1.96</span>)<span class="op">*</span>se)</a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sprintf">sprintf</a></span>(<span class="st">"%.2f (95%% CI: %.2f to %.2f)"</span>, mu, lim[<span class="dv">1</span>], lim[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb9-4" title="4">}</a>
<a class="sourceLine" id="cb9-5" title="5">bfit &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(hp <span class="op">~</span><span class="st"> </span>disp, mtcars)</a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">## The coefficient estimate is `r sprint_CI95(bfit$coeff[2], sqrt(diag(vcov(bfit)))[2])`</span></a></code></pre></div>
<p>The coefficient estimate is 0.44 (95% CI: 0.32 to 0.56).</p>
</div>
<div id="extending-knitr" class="section level3">
<h3 class="hasAnchor">
<a href="#extending-knitr" class="anchor"></a>Extending knitr</h3>
<p>Output and rendering can be customized endlessly. <code>knitr</code> is written in <code>R</code> to process chunks, so write your own functions. These types of functions are called “hooks”. For example, in this document I used a custom hook to display the code chunks as they appear:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">knit_hooks<span class="op">$</span><span class="kw">set</span>(<span class="dt">source =</span> <span class="cf">function</span>(x, options){</a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/NULL">is.null</a></span>(options<span class="op">$</span>verbatim) <span class="op">&amp;&amp;</span><span class="st"> </span>options<span class="op">$</span>verbatim){</a>
<a class="sourceLine" id="cb10-3" title="3">    opts =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">gsub</a></span>(<span class="st">",</span><span class="ch">\\</span><span class="st">s*verbatim</span><span class="ch">\\</span><span class="st">s*=</span><span class="ch">\\</span><span class="st">s*TRUE</span><span class="ch">\\</span><span class="st">s*"</span>, <span class="st">""</span>, options<span class="op">$</span>params.src)</a>
<a class="sourceLine" id="cb10-4" title="4">    bef =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sprintf">sprintf</a></span>(<span class="st">'</span><span class="ch">\n\n</span><span class="st">    ```{r %s}</span><span class="ch">\n</span><span class="st">'</span>, opts, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb10-5" title="5">    stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span>(</a>
<a class="sourceLine" id="cb10-6" title="6">      bef, </a>
<a class="sourceLine" id="cb10-7" title="7">      knitr<span class="op">:::</span><span class="kw">indent_block</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(x, <span class="dt">collapse =</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>), <span class="st">"    "</span>), </a>
<a class="sourceLine" id="cb10-8" title="8">      <span class="st">"</span><span class="ch">\n</span><span class="st">    ```</span><span class="ch">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb10-9" title="9">    )</a>
<a class="sourceLine" id="cb10-10" title="10">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb10-11" title="11">    stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span>(<span class="st">"</span><span class="ch">\n\n</span><span class="st">```"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/chartr">tolower</a></span>(options<span class="op">$</span>engine), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, </a>
<a class="sourceLine" id="cb10-12" title="12">      <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(x, <span class="dt">collapse =</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">```</span><span class="ch">\n\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb10-13" title="13">    )</a>
<a class="sourceLine" id="cb10-14" title="14">  }</a>
<a class="sourceLine" id="cb10-15" title="15">})</a></code></pre></div>
<p>Credit: <a href="https://ramnathv.github.io/posts/verbatim-chunks-knitr/">Ramnath Vaidyanathan</a></p>
</div>
</div>
<div id="output-formats" class="section level1">
<h1 class="hasAnchor">
<a href="#output-formats" class="anchor"></a>Output formats</h1>
<div id="pandoc" class="section level3">
<h3 class="hasAnchor">
<a href="#pandoc" class="anchor"></a>Pandoc</h3>
<p>The folks at <a href="http://rstudio.org">Rstudio</a> have worked hard to bundle <code>knitr</code> with <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>, a universal document converter. Pandoc allows you to take markdown documents and convert them to almost any file format, docx, pdf, html, and much more. Furthermore, you can even convert markdown to Tex, which comes in handy for journal submission. Previously, if you wanted html output, you wrote a report in rmarkdown or rhtml and if you wanted a pdf, you had to start over with a .Rnw file. Now we can seamlessly switch between formats. The key is in defining what you want in the <strong>front matter</strong> of your document.</p>
<p>At the top of your markdown file, all of the pandoc parameters are put between <code>---</code> delimeters. For example, in this document, I have</p>
<pre><code>---
title: "knitr"
author: Michael Sachs
output: 
  md_document:
    variant: markdown_github
---</code></pre>
<p>This is the front-matter, and it is in <code>yaml</code> format. Rstudio passes these options to pandoc to convert my document to the appropriate format, after knitting. See all of the possible options here <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>For example, if I want pdf output, keeping the intermediate tex file I would use</p>
<pre><code>---
title: "knitr"
author: Michael Sachs
output: 
  pdf_document:
    keep_tex: true
---</code></pre>
<p>Other commond document formats are <code>word_document</code>, <code>html_document</code>, and <code>beamer_presentation</code>. You can include a bibliography in a variety of formats, including <code>.bib</code>, with the <code>bibliography: myfile.bib</code> option. Include citations with the <code>@bibkey</code> syntax.</p>
<p>To recap, this diagram illustrates my typical workflow. I start with a .Rmd, an r-markdown document with code, background, and descriptions. <code>knitr</code> does the work to evaluate the code, putting the results in a markdown document, which can then be converted to a variety of formats with pandoc. To extract the R code from the original document I use the <code><a href="https://www.rdocumentation.org/packages/knitr/topics/knit">knitr::purl</a></code> function. I can then easily incorporate the code chunks into other document types, like presentations.</p>
<div class="figure">
<img src="../../../../../../../knit/knitr-workflow.png" alt="flow"><p class="caption">flow</p>
</div>
<p>These tools are powerful and useful for all of the beautiful reports and variety of documents you can create. More important, however, are the plain-text files that generate the reports. Writing code along with prose describing the analysis gives others and our future selves a better and clearer understanding of the analysis itself. <code>knitr</code> makes it easy to write analysis code for people, not computers. Do your future self a favor and start using <code>knitr</code> today.</p>
</div>
</div>
<div id="resources" class="section level1">
<h1 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h1>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<ul>
<li>Download the <a href="http://www.rstudio.com/products/rstudio/download/preview/">Rstudio preview release</a>
<ul>
<li>It comes with everything you need (except Latex)</li>
<li>Menu options to create .Rmd files</li>
<li>Handy button to <code>knit</code> documents</li>
<li>Preview output</li>
</ul>
</li>
<li>Conversion to output formats uses <code>pandoc</code>
<ul>
<li>Translates between semantic markup</li>
<li>Endless customization</li>
<li>Pass options via the <em>front matter</em> at the top of document</li>
</ul>
</li>
</ul>
</div>
<div id="front-matter" class="section level2">
<h2 class="hasAnchor">
<a href="#front-matter" class="anchor"></a>Front matter</h2>
<ul>
<li>Document types
<ul>
<li>
<code>pdf_document</code>, <code>word_document</code>, <code>html_document</code>
</li>
<li>
<code>beamer_presentation</code>, <code>ioslides_presentation</code>
</li>
</ul>
</li>
<li>Other options
<ul>
<li><code>bibliography: mybib.bib</code></li>
<li>Cite with <code>@paperkey</code>
</li>
<li>See <a href="http://rmarkdown.rstudio.com/" class="uri">http://rmarkdown.rstudio.com/</a> for complete documentation</li>
</ul>
</li>
</ul>
<p>Full source for this webpage available <a href="http://github.com/sachsmc/knit-git-markr-guide" class="uri">http://github.com/sachsmc/knit-git-markr-guide</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#motivation">Motivation</a></li>
      <li><a href="#how-to-use-knitr">How to use <code>knitr</code></a></li>
      <li><a href="#controlling-r-output">Controlling <code>R</code> output</a></li>
      <li><a href="#output-formats">Output formats</a></li>
      <li>
<a href="#resources">Resources</a><ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting started</a></li>
      <li><a href="#front-matter">Front matter</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael Sachs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
